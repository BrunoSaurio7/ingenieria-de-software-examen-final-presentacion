<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Est√°ndar Q-Hol√≠stico</title>
    
    <!-- Metadatos para compartir en redes/GitHub -->
    <meta name="description" content="Presentaci√≥n del Est√°ndar Q-Hol√≠stico: Arquitectura, Talento y Blindaje de Datos">
    <meta name="author" content="Est√°ndar Q-Hol√≠stico">

    <!-- Favicon (Incrustado para no depender de archivos externos) -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üí†</text></svg>">
    
    <!-- Reveal.js CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/reveal.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/theme/night.min.css" id="theme">
    
    <!-- Tailwind CSS (para dise√±o interno de slides) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* Ajustes personalizados para Reveal + Tailwind */
        .reveal .slides { text-align: left; }
        .reveal h1, .reveal h2, .reveal h3, .reveal h4, .reveal h5 { text-transform: none; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .reveal p, .reveal li, .reveal td { font-size: 0.8em; line-height: 1.4; }
        
        /* Tablas personalizadas */
        .criteria-table { width: 100%; border-collapse: collapse; font-size: 0.6em !important; margin-top: 20px; }
        .criteria-table th { background-color: #2d3748; color: #63b3ed; padding: 10px; border-bottom: 2px solid #4a5568; text-align: left; }
        .criteria-table td { padding: 10px; border-bottom: 1px solid #4a5568; color: #e2e8f0; }
        .criteria-table tr:last-child td { border-bottom: none; }
        .weight-col { text-align: center; color: #f6ad55 !important; font-weight: bold; }
        
        /* Utilidades */
        .highlight-box { background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px; border-left: 5px solid #63b3ed; }
        .veto-box { background: rgba(229, 62, 62, 0.15); padding: 20px; border-radius: 10px; border-left: 5px solid #e53e3e; margin-top: 20px; }
        .vision-quote { font-style: italic; color: #a0aec0; border-left: 4px solid #63b3ed; padding-left: 20px; margin: 20px 0; }
        .slide-footer { position: absolute; bottom: 0; right: 0; font-size: 0.4em; opacity: 0.5; }
        
        /* Estilos espec√≠ficos para tarjetas de equipo */
        .team-card { background: rgba(45, 55, 72, 0.6); padding: 15px; border-radius: 8px; border: 1px solid #4a5568; display: flex; align-items: center; transition: transform 0.3s; }
        .team-card:hover { transform: translateY(-5px); border-color: #63b3ed; }

        /* Badge de Referencia */
        .ref-badge { display: inline-block; background: #2d3748; color: #a0aec0; padding: 4px 12px; border-radius: 20px; font-size: 0.5em; border: 1px solid #4a5568; margin-bottom: 10px; font-family: 'Courier New', monospace; }
        .ref-badge i { margin-right: 5px; color: #63b3ed; }

        /* ====== Eval UI (compacta para Reveal sin overflow) ====== */
        .eval-wrap { height: 640px; display: flex; flex-direction: column; justify-content: flex-start; gap: 10px; }
        .eval-title { display:flex; align-items:center; justify-content:space-between; gap:10px; }
        .eval-sub { font-size: 12px; color: #a0aec0; margin-top: 2px; }
        .eval-grid { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 10px; }

        .q-card {
            background: rgba(45, 55, 72, 0.55);
            border: 1px solid #4a5568;
            border-radius: 12px;
            padding: 10px;
        }
        .q-card h4 { margin: 0; font-size: 14px; color: #fff; font-weight: 700; }
        .q-meta { font-size: 10px; color: #a0aec0; margin-top: 2px; }

        .q-pts {
            font-size: 11px;
            font-weight: 800;
            color: #f6ad55;
            border: 1px solid #4a5568;
            border-radius: 999px;
            padding: 2px 8px;
            background: rgba(0,0,0,0.25);
            white-space: nowrap;
        }

        .q-field { font-size: 11px; color: #cbd5e0; }
        .q-input, .q-select {
            width: 100%;
            background: rgba(26, 32, 44, 0.85);
            border: 1px solid #4a5568;
            border-radius: 10px;
            padding: 6px 8px;
            color: #e2e8f0;
            font-size: 11px;
            outline: none;
        }
        .q-input:focus, .q-select:focus { border-color: #63b3ed; box-shadow: 0 0 0 2px rgba(99,179,237,0.15); }

        .q-score {
            font-size: 12px;
            font-weight: 800;
            color: #e2e8f0;
            border: 1px solid #4a5568;
            border-radius: 999px;
            padding: 2px 8px;
            background: rgba(0,0,0,0.25);
        }

        .q-bar {
            height: 10px;
            width: 100%;
            background: rgba(255,255,255,0.08);
            border: 1px solid rgba(255,255,255,0.10);
            border-radius: 999px;
            overflow: hidden;
        }
        .q-bar-fill { height: 100%; width: 0%; border-radius: 999px; transition: width 200ms ease; }

        .q-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            font-weight: 700;
            padding: 8px 12px;
            border-radius: 12px;
            border: 1px solid #4a5568;
            background: rgba(45,55,72,0.45);
            color: #e2e8f0;
            cursor: pointer;
            user-select: none;
        }
        .q-btn:hover { border-color: #63b3ed; transform: translateY(-1px); }
        .q-badge {
            font-size: 12px;
            font-weight: 900;
            padding: 6px 10px;
            border-radius: 999px;
            border: 1px solid #4a5568;
            background: rgba(0,0,0,0.25);
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        .q-warn {
            background: rgba(229, 62, 62, 0.16);
            border: 1px solid rgba(229, 62, 62, 0.35);
            border-radius: 12px;
            padding: 10px;
            color: #fed7d7;
            font-size: 12px;
        }
    </style>
</head>
<body>

    <div class="reveal">
        <div class="slides">

            <!-- Diapositiva 1: Portada y Visi√≥n -->
            <section data-background-gradient="linear-gradient(to bottom right, #1a202c, #2d3748)">
                <div class="flex flex-col items-center justify-center h-full text-center">
                    <div class="mb-6 transform hover:scale-110 transition duration-500">
                        <i class="fas fa-cubes text-7xl text-blue-400 drop-shadow-lg"></i>
                    </div>
                    <h1 class="text-5xl font-bold text-white mb-2 tracking-wide">Est√°ndar Q-Hol√≠stico</h1>
                    <h3 class="text-2xl text-blue-300 mb-6 font-light">Human-Centric Engineering</h3>
                    
                    <div class="vision-quote text-xl max-w-3xl mx-auto mb-8">
                        "Un sistema no es de calidad si su arquitectura no escala, si sus datos no son √≠ntegros o si el equipo que lo mantiene est√° agotado."
                    </div>

                    <!-- Datos Acad√©micos del PDF -->
                    <div class="text-sm text-gray-400 border-t border-gray-600 pt-4 mt-4 w-2/3 mx-auto">
                        <p class="m-0 font-bold text-blue-200">Ingenier√≠a de Software 1</p>
                        <p class="m-0">Prof. Paulina Bustos Arellano</p>
                        <p class="m-0 text-xs mt-1 opacity-70">17 de Diciembre, 2025</p>
                    </div>
                </div>
            </section>

            <!-- Diapositiva 1.5: Equipo Error 404 -->
            <section data-background-gradient="linear-gradient(to bottom left, #1a202c, #2d3748)">
                <div class="flex flex-col items-center justify-center h-full">
                    <h2 class="text-4xl text-blue-400 font-bold mb-2">Equipo Error 404</h2>
                    <p class="text-gray-400 text-sm mb-10">Propuesta T√©cnica</p>
                    
                    <div class="grid grid-cols-2 gap-6 w-full max-w-4xl px-8">
                        <!-- Integrante 1 -->
                        <div class="team-card">
                            <div class="w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white mr-4 font-bold text-sm">BP</div>
                            <span class="text-lg text-gray-200">Bruno P√©rez</span>
                        </div>
                        <!-- Integrante 2 -->
                        <div class="team-card">
                            <div class="w-10 h-10 rounded-full bg-purple-500 flex items-center justify-center text-white mr-4 font-bold text-sm">FV</div>
                            <span class="text-lg text-gray-200">Fernando Villalobos</span>
                        </div>
                        <!-- Integrante 3 -->
                        <div class="team-card">
                            <div class="w-10 h-10 rounded-full bg-green-500 flex items-center justify-center text-white mr-4 font-bold text-sm">PM</div>
                            <span class="text-lg text-gray-200">Pedro Merino</span>
                        </div>
                        <!-- Integrante 4 -->
                        <div class="team-card">
                            <div class="w-10 h-10 rounded-full bg-pink-500 flex items-center justify-center text-white mr-4 font-bold text-sm">MZ</div>
                            <span class="text-lg text-gray-200">Mariana Zapata</span>
                        </div>
                        <!-- Integrante 5 -->
                        <div class="team-card col-span-2 md:col-span-2 md:w-1/2 md:mx-auto">
                            <div class="w-10 h-10 rounded-full bg-yellow-500 flex items-center justify-center text-white mr-4 font-bold text-sm">PM</div>
                            <span class="text-lg text-gray-200">Pablo Melendez</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Diapositiva 2: Los 3 Pilares -->
            <section>
                <h3 class="text-blue-400 border-b border-gray-600 pb-2 mb-6">3 Pilares (Pr√°cticas)</h3>
                <p class="mb-8 text-gray-300">Marco de referencia para la evaluaci√≥n de calidad</p>
                
                <div class="grid grid-cols-3 gap-4 text-center">
                    <!-- Pilar 1 -->
                    <div class="p-4 bg-gray-800 rounded-lg shadow-lg transform transition hover:scale-105">
                        <i class="fas fa-server text-4xl text-green-400 mb-4"></i>
                        <h4 class="text-lg font-bold text-white mb-2">Arquitectura</h4>
                        <div class="text-xs text-gray-400 mb-2 font-mono">ISO/IEC 12207</div>
                        <div class="text-3xl font-bold text-green-400">35%</div>
                    </div>

                    <!-- Pilar 2 -->
                    <div class="p-4 bg-gray-800 rounded-lg shadow-lg transform transition hover:scale-105 border border-blue-500">
                        <i class="fas fa-heart text-4xl text-blue-400 mb-4"></i>
                        <h4 class="text-lg font-bold text-white mb-2">Bienestar</h4>
                        <div class="text-xs text-gray-400 mb-2 font-mono">CMMI Nivel 3</div>
                        <div class="text-3xl font-bold text-blue-400">30%</div>
                    </div>

                    <!-- Pilar 3 -->
                    <div class="p-4 bg-gray-800 rounded-lg shadow-lg transform transition hover:scale-105">
                        <i class="fas fa-shield-alt text-4xl text-purple-400 mb-4"></i>
                        <h4 class="text-lg font-bold text-white mb-2">Seguridad</h4>
                        <div class="text-xs text-gray-400 mb-2 font-mono">IEEE 29148</div>
                        <div class="text-3xl font-bold text-purple-400">35%</div>
                    </div>
                </div>
            </section>

            <!-- Diapositiva 3: Arquitectura -->
            <section>
                <div class="flex flex-col mb-2">
                    <div class="flex items-center gap-3">
                        <i class="fas fa-server text-green-400 text-2xl"></i>
                        <h3 class="text-2xl text-white m-0">Arquitectura √Ågil y Escalable</h3>
                    </div>
                    <div class="mt-2">
                        <span class="ref-badge"><i class="fas fa-book"></i>Ref: ISO/IEC 12207 & 25010</span>
                    </div>
                </div>
                <p class="text-sm text-gray-400 mb-2">Objetivo: Dise√±o modular para evoluci√≥n constante.</p>

                <table class="criteria-table">
                    <thead>
                        <tr>
                            <th width="30%">Criterio</th>
                            <th width="55%">M√©trica / Descripci√≥n T√©cnica</th>
                            <th width="15%">Peso</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="font-bold">Escalabilidad (HPA)</td>
                            <td>Soporte incremento de <strong>300%</strong> en usuarios sin degradaci√≥n.</td>
                            <td class="weight-col">10 pts</td>
                        </tr>
                        <tr>
                            <td class="font-bold">Rendimiento</td>
                            <td>Latencia <strong>< 500ms</strong> en carga nominal.</td>
                            <td class="weight-col">10 pts</td>
                        </tr>
                        <tr>
                            <td class="font-bold">Modularidad</td>
                            <td>Microservicios agn√≥sticos (Plug-and-Play).</td>
                            <td class="weight-col">8 pts</td>
                        </tr>
                        <tr>
                            <td class="font-bold">Tolerancia a Fallos</td>
                            <td>Regresi√≥n cero en despliegues nuevos.</td>
                            <td class="weight-col">7 pts</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="mt-4 flex items-center gap-4 text-xs bg-gray-800 p-2 rounded">
                    <i class="fas fa-check-circle text-green-400"></i>
                    <span><strong>Prueba:</strong> Carga masiva (JMeter) y an√°lisis est√°tico.</span>
                </div>
            </section>

            <!-- Diapositiva 4: Bienestar -->
            <section>
                <div class="flex flex-col mb-2">
                    <div class="flex items-center gap-3">
                        <i class="fas fa-heart text-blue-400 text-2xl"></i>
                        <h3 class="text-2xl text-white m-0">Prioridad al Equipo (CMMI-3)</h3>
                    </div>
                    <div class="mt-2">
                        <span class="ref-badge"><i class="fas fa-book"></i>Ref: CMMI Level 3 & ISO/IEC 12207</span>
                    </div>
                </div>
                <p class="text-sm text-gray-400 mb-2">Filosof√≠a: Procesos equilibrados = C√≥digo mantenible.</p>

                <table class="criteria-table">
                    <thead>
                        <tr>
                            <th width="30%">Criterio</th>
                            <th width="55%">M√©trica / Descripci√≥n Humana</th>
                            <th width="15%">Peso</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="font-bold">Retenci√≥n y Rotaci√≥n</td>
                            <td>Rotaci√≥n anual <strong>< 5%</strong>. (Mayor a 5% es falla cr√≠tica).</td>
                            <td class="weight-col">10 pts</td>
                        </tr>
                        <tr>
                            <td class="font-bold">Salud del On-Call</td>
                            <td>Max 2 alertas/semana off-hours. Cero H√©roes.</td>
                            <td class="weight-col">10 pts</td>
                        </tr>
                        <tr>
                            <td class="font-bold">Desconexi√≥n</td>
                            <td>100% cumplimiento en bloqueo de notificaciones.</td>
                            <td class="weight-col">5 pts</td>
                        </tr>
                        <tr>
                            <td class="font-bold">Predictibilidad</td>
                            <td>Desviaci√≥n m√°xima ¬±10% en estimaci√≥n vs real.</td>
                            <td class="weight-col">5 pts</td>
                        </tr>
                    </tbody>
                </table>

                <div class="mt-4 flex items-center gap-4 text-xs bg-gray-800 p-2 rounded">
                    <i class="fas fa-check-circle text-blue-400"></i>
                    <span><strong>Verificaci√≥n:</strong> Logs de actividad off-work y tasa de deserci√≥n.</span>
                </div>
            </section>

            <!-- Diapositiva 5: Seguridad -->
            <section>
                <div class="flex flex-col mb-2">
                    <div class="flex items-center gap-3">
                        <i class="fas fa-shield-alt text-purple-400 text-2xl"></i>
                        <h3 class="text-2xl text-white m-0">Confidencialidad e Integridad</h3>
                    </div>
                    <div class="mt-2">
                        <span class="ref-badge"><i class="fas fa-book"></i>Ref: ISO/IEC 25010 & IEEE 29148</span>
                    </div>
                </div>
                <p class="text-sm text-gray-400 mb-2">Objetivo: Security by Design en todas las capas.</p>

                <table class="criteria-table">
                    <thead>
                        <tr>
                            <th width="30%">Criterio</th>
                            <th width="55%">M√©trica / Descripci√≥n de Seguridad</th>
                            <th width="15%">Peso</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="font-bold">Auditor√≠a de Cifrado</td>
                            <td>Uso total de <strong>AES-256</strong> (reposo) y TLS 1.3 (tr√°nsito).</td>
                            <td class="weight-col">12 pts</td>
                        </tr>
                        <tr>
                            <td class="font-bold">Integridad de Datos</td>
                            <td>Bloqueo del <strong>100%</strong> de intentos de alteraci√≥n (Hashing/WORM).</td>
                            <td class="weight-col">10 pts</td>
                        </tr>
                        <tr>
                            <td class="font-bold">Control de Accesos</td>
                            <td>Aislamiento de roles (RBAC) inviolable en Pentesting.</td>
                            <td class="weight-col">8 pts</td>
                        </tr>
                        <tr>
                            <td class="font-bold">Sanitizaci√≥n</td>
                            <td>Prevenci√≥n proactiva SQLi/XSS validada.</td>
                            <td class="weight-col">5 pts</td>
                        </tr>
                    </tbody>
                </table>

                <div class="mt-4 flex items-center gap-4 text-xs bg-gray-800 p-2 rounded">
                    <i class="fas fa-check-circle text-purple-400"></i>
                    <span><strong>Verificaci√≥n:</strong> Pentesting y escaneo de vulnerabilidades.</span>
                </div>
            </section>

            <!-- Diapositiva 6: Tablero Final -->
            <section>
                <h3 class="text-blue-400 mb-6">Tablero de Certificaci√≥n</h3>
                
                <div class="grid grid-cols-2 gap-6">
                    <div class="space-y-4 text-left">
                        <div class="flex items-center p-2 rounded bg-yellow-900 bg-opacity-40 border-l-4 border-yellow-500">
                            <i class="fas fa-medal text-yellow-500 mr-3 text-2xl"></i>
                            <div>
                                <strong class="text-yellow-400 text-lg">Nivel Oro (90-100)</strong>
                                <div class="text-xs">Excelencia t√©cnica y humana.</div>
                            </div>
                        </div>
                        <div class="flex items-center p-2 rounded bg-gray-700 bg-opacity-40 border-l-4 border-gray-400">
                            <i class="fas fa-medal text-gray-400 mr-3 text-2xl"></i>
                            <div>
                                <strong class="text-gray-300 text-lg">Nivel Plata (75-89)</strong>
                                <div class="text-xs">Robusto con mejoras menores.</div>
                            </div>
                        </div>
                        <div class="flex items-center p-2 rounded bg-orange-900 bg-opacity-40 border-l-4 border-orange-600">
                            <i class="fas fa-medal text-orange-600 mr-3 text-2xl"></i>
                            <div>
                                <strong class="text-orange-500 text-lg">Nivel Bronce (60-74)</strong>
                                <div class="text-xs">Funcional, riesgo de deuda.</div>
                            </div>
                        </div>
                    </div>

                    <div class="flex flex-col justify-center">
                        <div class="veto-box">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-exclamation-triangle text-red-500 mr-2 text-xl"></i>
                                <h4 class="text-red-400 font-bold m-0 uppercase text-lg">Regla de Veto</h4>
                            </div>
                            <p class="text-sm text-white leading-relaxed">
                                Si el puntaje en <strong>Bienestar</strong> es <span class="text-red-400 font-bold">< 50%</span> (o rotaci√≥n > 5%), el software <strong class="underline decoration-red-500">NO SE CERTIFICA</strong>.
                            </p>
                            <p class="text-xs text-red-300 mt-2 italic">
                                "Un est√°ndar de calidad no es solo t√©cnico, es un acuerdo de sostenibilidad humana."
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="mt-4 p-2 bg-gray-800 rounded text-xs text-center text-gray-400">
                    < 60 pts: No certificado. Riesgo operativo alto.
                </div>
            </section>

            <!-- Diapositiva 7: Conclusi√≥n -->
            <section>
                <h3 class="text-blue-400 mb-4">Visi√≥n Integral</h3>
                
                <div class="bg-gray-800 p-6 rounded-lg border border-gray-700">
                    <h5 class="text-white border-b border-gray-600 pb-2 mb-4">La excelencia se alcanza con armon√≠a entre:</h5>
                    <div class="grid grid-cols-3 gap-4 text-center">
                        <div>
                            <div class="text-green-400 font-bold mb-1">Robustez</div>
                            <p class="text-xs text-gray-400">Arquitecturas que crecen con el negocio.</p>
                        </div>
                        <div>
                            <div class="text-purple-400 font-bold mb-1">Confianza</div>
                            <p class="text-xs text-gray-400">Seguridad e integridad total del dato.</p>
                        </div>
                        <div>
                            <div class="text-blue-400 font-bold mb-1">Sostenibilidad</div>
                            <p class="text-xs text-gray-400">Respeto por el factor humano que construye la tecnolog√≠a.</p>
                        </div>
                    </div>
                </div>

                <div class="mt-12 text-center">
                    <p class="text-xl font-bold text-white">¬øPreguntas?</p>
                </div>
            </section>

            <!-- ====== BLOQUE FINAL: Evaluaci√≥n Interactiva ====== -->
            <section data-background-gradient="linear-gradient(to bottom right, #111827, #1f2937)">

            <!-- Intro -->
            <section>
                <div class="eval-wrap">
                <div class="eval-title">
                    <h3 class="text-blue-400 m-0">Eval√∫a a tu equipo</h3>
                    <button class="q-btn" onclick="Reveal.down()">
                    <i class="fas fa-play text-blue-300"></i> Iniciar
                    </button>
                </div>
                <p class="eval-sub">
                    Responde r√°pido (2 inputs por criterio). Se calcula puntaje por criterio, por pilar y el total con veto.
                </p>

                <div class="bg-gray-800 p-4 rounded-lg border border-gray-700">
                    <div class="grid grid-cols-3 gap-3 text-xs">
                    <div>
                        <div class="text-green-400 font-bold">Arquitectura (35)</div>
                        <div class="text-gray-400">Escala, latencia, modularidad, fallos</div>
                    </div>
                    <div>
                        <div class="text-blue-400 font-bold">Bienestar (30)</div>
                        <div class="text-gray-400">Rotaci√≥n, on-call, desconexi√≥n, predictibilidad</div>
                    </div>
                    <div>
                        <div class="text-purple-400 font-bold">Seguridad (35)</div>
                        <div class="text-gray-400">Cifrado, integridad, accesos, sanitizaci√≥n</div>
                    </div>
                    </div>
                </div>

                <div class="q-warn">
                    <i class="fas fa-exclamation-triangle mr-2"></i>
                    <strong>Veto:</strong> si Bienestar &lt; 50% <em>o</em> Rotaci√≥n &gt; 5%, el software <strong>NO se certifica</strong>.
                </div>

                <div class="flex gap-2 mt-2">
                    <button class="q-btn" onclick="window.QEval?.resetAll()">
                    <i class="fas fa-rotate-left text-gray-300"></i> Reset
                    </button>
                    <button class="q-btn" onclick="Reveal.down()">
                    <i class="fas fa-arrow-down text-blue-300"></i> Empezar con Arquitectura
                    </button>
                </div>
                </div>
            </section>

            <!-- Pilar 1: Arquitectura -->
            <section id="eval-arch">
                <div class="eval-wrap">
                <div class="eval-title">
                    <div>
                    <h3 class="m-0 text-white"><i class="fas fa-server text-green-400 mr-2"></i>Arquitectura</h3>
                    <div class="eval-sub">Objetivo: dise√±o modular y performance bajo crecimiento real.</div>
                    </div>
                    <div class="flex items-center gap-2">
                    <span id="pill-arch" class="q-score">0 / 35</span>
                    <button class="q-btn" onclick="Reveal.down()"><i class="fas fa-arrow-down text-blue-300"></i> Siguiente</button>
                    </div>
                </div>

                <div class="q-bar"><div id="bar-arch" class="q-bar-fill" style="background:#22c55e;"></div></div>

                <div class="eval-grid">
                    <!-- Escalabilidad -->
                    <div class="q-card">
                    <div class="flex items-start justify-between gap-2">
                        <div>
                        <h4>Escalabilidad (HPA)</h4>
                        <div class="q-meta">Meta: +300% usuarios sin degradaci√≥n</div>
                        </div>
                        <div class="q-pts">10 pts</div>
                    </div>
                    <div class="grid grid-cols-2 gap-2 mt-2">
                        <div class="q-field">
                        Crecimiento probado (%)
                        <input class="q-input" data-q id="arch_scale_pct" type="number" min="0" max="1000" placeholder="300">
                        </div>
                        <div class="q-field">
                        Evidencia
                        <select class="q-select" data-q id="arch_scale_ev">
                            <option value="0">No medido</option>
                            <option value="0.6">Prueba manual</option>
                            <option value="1">Prueba automatizada + reporte</option>
                        </select>
                        </div>
                    </div>
                    <div class="flex items-center justify-between mt-2">
                        <span class="q-meta">Score</span>
                        <span id="s-arch-scale" class="q-score">0 / 10</span>
                    </div>
                    </div>

                    <!-- Rendimiento -->
                    <div class="q-card">
                    <div class="flex items-start justify-between gap-2">
                        <div>
                        <h4>Rendimiento</h4>
                        <div class="q-meta">Meta: latencia &lt; 500ms</div>
                        </div>
                        <div class="q-pts">10 pts</div>
                    </div>
                    <div class="grid grid-cols-2 gap-2 mt-2">
                        <div class="q-field">
                        P95 Latencia (ms)
                        <input class="q-input" data-q id="arch_latency_ms" type="number" min="0" max="10000" placeholder="500">
                        </div>
                        <div class="q-field">
                        Evidencia
                        <select class="q-select" data-q id="arch_latency_ev">
                            <option value="0">No medido</option>
                            <option value="0.6">Monitoreo b√°sico</option>
                            <option value="1">APM + SLO/SLA</option>
                        </select>
                        </div>
                    </div>
                    <div class="flex items-center justify-between mt-2">
                        <span class="q-meta">Score</span>
                        <span id="s-arch-lat" class="q-score">0 / 10</span>
                    </div>
                    </div>

                    <!-- Modularidad -->
                    <div class="q-card">
                    <div class="flex items-start justify-between gap-2">
                        <div>
                        <h4>Modularidad</h4>
                        <div class="q-meta">Meta: Plug-and-Play real (interfaces claras)</div>
                        </div>
                        <div class="q-pts">8 pts</div>
                    </div>
                    <div class="grid grid-cols-2 gap-2 mt-2">
                        <div class="q-field">
                        Estructura
                        <select class="q-select" data-q id="arch_mod_level">
                            <option value="0.2">Monolito</option>
                            <option value="0.65">Monolito modular</option>
                            <option value="1">Microservicios agn√≥sticos</option>
                        </select>
                        </div>
                        <div class="q-field">
                        Contratos / APIs
                        <select class="q-select" data-q id="arch_mod_ev">
                            <option value="0.2">No definidos</option>
                            <option value="0.7">Parcial</option>
                            <option value="1">Versionados + pruebas</option>
                        </select>
                        </div>
                    </div>
                    <div class="flex items-center justify-between mt-2">
                        <span class="q-meta">Score</span>
                        <span id="s-arch-mod" class="q-score">0 / 8</span>
                    </div>
                    </div>

                    <!-- Tolerancia a fallos -->
                    <div class="q-card">
                    <div class="flex items-start justify-between gap-2">
                        <div>
                        <h4>Tolerancia a Fallos</h4>
                        <div class="q-meta">Meta: regresi√≥n cero + rollback seguro</div>
                        </div>
                        <div class="q-pts">7 pts</div>
                    </div>
                    <div class="grid grid-cols-2 gap-2 mt-2">
                        <div class="q-field">
                        Regresiones (√∫ltimos 10 deploys)
                        <input class="q-input" data-q id="arch_regressions" type="number" min="0" max="10" placeholder="0">
                        </div>
                        <div class="q-field">
                        Estrategia
                        <select class="q-select" data-q id="arch_fail_ev">
                            <option value="0.2">Sin rollback</option>
                            <option value="0.7">Rollback manual</option>
                            <option value="1">Canary/Blue-Green + rollback</option>
                        </select>
                        </div>
                    </div>
                    <div class="flex items-center justify-between mt-2">
                        <span class="q-meta">Score</span>
                        <span id="s-arch-fail" class="q-score">0 / 7</span>
                    </div>
                    </div>
                </div>

                <div class="flex gap-2">
                    <button class="q-btn" onclick="Reveal.up()"><i class="fas fa-arrow-up text-gray-300"></i> Regresar</button>
                    <button class="q-btn" onclick="Reveal.down()"><i class="fas fa-arrow-down text-blue-300"></i> Bienestar</button>
                </div>
                </div>
            </section>

            <!-- Pilar 2: Bienestar -->
            <section id="eval-well">
                <div class="eval-wrap">
                <div class="eval-title">
                    <div>
                    <h3 class="m-0 text-white"><i class="fas fa-heart text-blue-400 mr-2"></i>Bienestar</h3>
                    <div class="eval-sub">Objetivo: procesos sostenibles, cero h√©roes y predicci√≥n realista.</div>
                    </div>
                    <div class="flex items-center gap-2">
                    <span id="pill-well" class="q-score">0 / 30</span>
                    <button class="q-btn" onclick="Reveal.down()"><i class="fas fa-arrow-down text-blue-300"></i> Siguiente</button>
                    </div>
                </div>

                <div class="q-bar"><div id="bar-well" class="q-bar-fill" style="background:#60a5fa;"></div></div>

                <div class="eval-grid">
                    <!-- Rotaci√≥n -->
                    <div class="q-card">
                    <div class="flex items-start justify-between gap-2">
                        <div>
                        <h4>Rotaci√≥n</h4>
                        <div class="q-meta">Meta: &lt; 5% anual</div>
                        </div>
                        <div class="q-pts">10 pts</div>
                    </div>
                    <div class="grid grid-cols-2 gap-2 mt-2">
                        <div class="q-field">
                        Rotaci√≥n (% anual)
                        <input class="q-input" data-q id="well_turnover_pct" type="number" min="0" max="100" placeholder="5">
                        </div>
                        <div class="q-field">
                        Plan de retenci√≥n
                        <select class="q-select" data-q id="well_turnover_ev">
                            <option value="0.2">No</option>
                            <option value="0.7">Parcial</option>
                            <option value="1">Formal + seguimiento</option>
                        </select>
                        </div>
                    </div>
                    <div class="flex items-center justify-between mt-2">
                        <span class="q-meta">Score</span>
                        <span id="s-well-turn" class="q-score">0 / 10</span>
                    </div>
                    </div>

                    <!-- On-call -->
                    <div class="q-card">
                    <div class="flex items-start justify-between gap-2">
                        <div>
                        <h4>Salud del On-Call</h4>
                        <div class="q-meta">Meta: ‚â§ 2 alertas/semana off-hours</div>
                        </div>
                        <div class="q-pts">10 pts</div>
                    </div>
                    <div class="grid grid-cols-2 gap-2 mt-2">
                        <div class="q-field">
                        Alertas off-hours / semana
                        <input class="q-input" data-q id="well_alerts_week" type="number" min="0" max="100" placeholder="2">
                        </div>
                        <div class="q-field">
                        Runbooks / rotaci√≥n
                        <select class="q-select" data-q id="well_oncall_ev">
                            <option value="0.2">No</option>
                            <option value="0.7">S√≠, b√°sico</option>
                            <option value="1">S√≠, maduro + postmortems</option>
                        </select>
                        </div>
                    </div>
                    <div class="flex items-center justify-between mt-2">
                        <span class="q-meta">Score</span>
                        <span id="s-well-oncall" class="q-score">0 / 10</span>
                    </div>
                    </div>

                    <!-- Desconexi√≥n -->
                    <div class="q-card">
                    <div class="flex items-start justify-between gap-2">
                        <div>
                        <h4>Desconexi√≥n</h4>
                        <div class="q-meta">Meta: 100% bloqueo de notificaciones</div>
                        </div>
                        <div class="q-pts">5 pts</div>
                    </div>
                    <div class="grid grid-cols-2 gap-2 mt-2">
                        <div class="q-field">
                        Cumplimiento (%)
                        <input class="q-input" data-q id="well_disconnect_pct" type="number" min="0" max="100" placeholder="100">
                        </div>
                        <div class="q-field">
                        Pol√≠tica enforceable
                        <select class="q-select" data-q id="well_disconnect_ev">
                            <option value="0.2">No</option>
                            <option value="0.7">Parcial</option>
                            <option value="1">S√≠, auditada</option>
                        </select>
                        </div>
                    </div>
                    <div class="flex items-center justify-between mt-2">
                        <span class="q-meta">Score</span>
                        <span id="s-well-disc" class="q-score">0 / 5</span>
                    </div>
                    </div>

                    <!-- Predictibilidad -->
                    <div class="q-card">
                    <div class="flex items-start justify-between gap-2">
                        <div>
                        <h4>Predictibilidad</h4>
                        <div class="q-meta">Meta: desviaci√≥n ‚â§ 10%</div>
                        </div>
                        <div class="q-pts">5 pts</div>
                    </div>
                    <div class="grid grid-cols-2 gap-2 mt-2">
                        <div class="q-field">
                        Desviaci√≥n (%)
                        <input class="q-input" data-q id="well_dev_pct" type="number" min="0" max="200" placeholder="10">
                        </div>
                        <div class="q-field">
                        Proceso de estimaci√≥n
                        <select class="q-select" data-q id="well_pred_ev">
                            <option value="0.2">Ad-hoc</option>
                            <option value="0.7">Ritual b√°sico</option>
                            <option value="1">Hist√≥rico + retros</option>
                        </select>
                        </div>
                    </div>
                    <div class="flex items-center justify-between mt-2">
                        <span class="q-meta">Score</span>
                        <span id="s-well-pred" class="q-score">0 / 5</span>
                    </div>
                    </div>
                </div>

                <div class="flex gap-2">
                    <button class="q-btn" onclick="Reveal.up()"><i class="fas fa-arrow-up text-gray-300"></i> Arquitectura</button>
                    <button class="q-btn" onclick="Reveal.down()"><i class="fas fa-arrow-down text-blue-300"></i> Seguridad</button>
                </div>
                </div>
            </section>

            <!-- Pilar 3: Seguridad -->
            <section id="eval-sec">
                <div class="eval-wrap">
                <div class="eval-title">
                    <div>
                    <h3 class="m-0 text-white"><i class="fas fa-shield-alt text-purple-400 mr-2"></i>Seguridad</h3>
                    <div class="eval-sub">Objetivo: security-by-design validable.</div>
                    </div>
                    <div class="flex items-center gap-2">
                    <span id="pill-sec" class="q-score">0 / 35</span>
                    <button class="q-btn" onclick="Reveal.down()"><i class="fas fa-arrow-down text-blue-300"></i> Ver reporte</button>
                    </div>
                </div>

                <div class="q-bar"><div id="bar-sec" class="q-bar-fill" style="background:#a78bfa;"></div></div>

                <div class="eval-grid">
                    <!-- Cifrado -->
                    <div class="q-card">
                    <div class="flex items-start justify-between gap-2">
                        <div>
                        <h4>Auditor√≠a de Cifrado</h4>
                        <div class="q-meta">Meta: AES-256 + TLS 1.3</div>
                        </div>
                        <div class="q-pts">12 pts</div>
                    </div>
                    <div class="grid grid-cols-2 gap-2 mt-2">
                        <div class="q-field">
                        Nivel de cifrado
                        <select class="q-select" data-q id="sec_crypto_level">
                            <option value="0.2">Parcial / inconsistente</option>
                            <option value="0.7">Cifrado fuerte, gaps</option>
                            <option value="1">AES-256 + TLS1.3 end-to-end</option>
                        </select>
                        </div>
                        <div class="q-field">
                        Auditor√≠a
                        <select class="q-select" data-q id="sec_crypto_ev">
                            <option value="0">Nunca</option>
                            <option value="0.6">Anual</option>
                            <option value="1">Trimestral + evidencias</option>
                        </select>
                        </div>
                    </div>
                    <div class="flex items-center justify-between mt-2">
                        <span class="q-meta">Score</span>
                        <span id="s-sec-crypto" class="q-score">0 / 12</span>
                    </div>
                    </div>

                    <!-- Integridad -->
                    <div class="q-card">
                    <div class="flex items-start justify-between gap-2">
                        <div>
                        <h4>Integridad de Datos</h4>
                        <div class="q-meta">Meta: bloqueo total + WORM/Hash</div>
                        </div>
                        <div class="q-pts">10 pts</div>
                    </div>
                    <div class="grid grid-cols-2 gap-2 mt-2">
                        <div class="q-field">
                        Bloqueo de alteraci√≥n (%)
                        <input class="q-input" data-q id="sec_integrity_pct" type="number" min="0" max="100" placeholder="100">
                        </div>
                        <div class="q-field">
                        Mecanismo
                        <select class="q-select" data-q id="sec_integrity_ev">
                            <option value="0.2">Ninguno</option>
                            <option value="0.7">Hashing</option>
                            <option value="1">WORM + Hash + alertas</option>
                        </select>
                        </div>
                    </div>
                    <div class="flex items-center justify-between mt-2">
                        <span class="q-meta">Score</span>
                        <span id="s-sec-int" class="q-score">0 / 10</span>
                    </div>
                    </div>

                    <!-- Accesos -->
                    <div class="q-card">
                    <div class="flex items-start justify-between gap-2">
                        <div>
                        <h4>Control de Accesos</h4>
                        <div class="q-meta">Meta: RBAC + MFA + least privilege</div>
                        </div>
                        <div class="q-pts">8 pts</div>
                    </div>
                    <div class="grid grid-cols-2 gap-2 mt-2">
                        <div class="q-field">
                        Modelo
                        <select class="q-select" data-q id="sec_access_level">
                            <option value="0.2">Credenciales compartidas</option>
                            <option value="0.7">RBAC</option>
                            <option value="1">RBAC + least privilege</option>
                        </select>
                        </div>
                        <div class="q-field">
                        MFA
                        <select class="q-select" data-q id="sec_mfa_ev">
                            <option value="0.2">No</option>
                            <option value="0.7">Parcial</option>
                            <option value="1">S√≠, obligatorio</option>
                        </select>
                        </div>
                    </div>
                    <div class="flex items-center justify-between mt-2">
                        <span class="q-meta">Score</span>
                        <span id="s-sec-acc" class="q-score">0 / 8</span>
                    </div>
                    </div>

                    <!-- Sanitizaci√≥n -->
                    <div class="q-card">
                    <div class="flex items-start justify-between gap-2">
                        <div>
                        <h4>Sanitizaci√≥n (SQLi/XSS)</h4>
                        <div class="q-meta">Meta: prevenci√≥n proactiva validada</div>
                        </div>
                        <div class="q-pts">5 pts</div>
                    </div>
                    <div class="grid grid-cols-2 gap-2 mt-2">
                        <div class="q-field">
                        Cr√≠ticas (√∫lt. 90 d√≠as)
                        <input class="q-input" data-q id="sec_vuln_crit" type="number" min="0" max="999" placeholder="0">
                        </div>
                        <div class="q-field">
                        Pipeline
                        <select class="q-select" data-q id="sec_sanitize_ev">
                            <option value="0.2">Sin validaci√≥n</option>
                            <option value="0.7">Validaci√≥n b√°sica</option>
                            <option value="1">Param queries + SAST/DAST</option>
                        </select>
                        </div>
                    </div>
                    <div class="flex items-center justify-between mt-2">
                        <span class="q-meta">Score</span>
                        <span id="s-sec-san" class="q-score">0 / 5</span>
                    </div>
                    </div>
                </div>

                <div class="flex gap-2">
                    <button class="q-btn" onclick="Reveal.up()"><i class="fas fa-arrow-up text-gray-300"></i> Bienestar</button>
                    <button class="q-btn" onclick="Reveal.down()"><i class="fas fa-file-alt text-blue-300"></i> Reporte</button>
                </div>
                </div>
            </section>

            <!-- Reporte final -->
            <section id="eval-report">
                <div class="eval-wrap">
                <div class="eval-title">
                    <div>
                    <h3 class="m-0 text-blue-400">Reporte de desempe√±o</h3>
                    <div class="eval-sub">Puntaje total + nivel + diagn√≥stico r√°pido.</div>
                    </div>
                    <div class="flex gap-2">
                    <button class="q-btn" onclick="window.QEval?.copyReport()">
                        <i class="fas fa-copy text-gray-300"></i> Copiar
                    </button>
                    <button class="q-btn" onclick="window.QEval?.resetAll()">
                        <i class="fas fa-rotate-left text-gray-300"></i> Reset
                    </button>
                    </div>
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <div class="bg-gray-800 p-4 rounded-lg border border-gray-700">
                    <div class="flex items-center justify-between">
                        <div class="text-gray-300 text-sm">Puntaje total</div>
                        <div id="r-total" class="q-badge"><i class="fas fa-gauge-high"></i> 0 / 100</div>
                    </div>
                    <div class="mt-3">
                        <div class="q-bar"><div id="bar-total" class="q-bar-fill" style="background:#63b3ed;"></div></div>
                    </div>

                    <div class="mt-4 flex items-center justify-between">
                        <div class="text-gray-300 text-sm">Nivel</div>
                        <div id="r-level" class="q-badge"><i class="fas fa-medal"></i> ‚Äî</div>
                    </div>

                    <div id="r-veto" class="mt-3 hidden q-warn"></div>
                    </div>

                    <div class="bg-gray-800 p-4 rounded-lg border border-gray-700">
                    <div class="text-gray-300 text-sm mb-2">Breakdown</div>

                    <div class="text-xs text-gray-300 flex items-center justify-between">
                        <span><i class="fas fa-server text-green-400 mr-2"></i>Arquitectura</span>
                        <span id="r-arch" class="q-score">0 / 35</span>
                    </div>
                    <div class="q-bar mt-2"><div id="rbar-arch" class="q-bar-fill" style="background:#22c55e;"></div></div>

                    <div class="text-xs text-gray-300 flex items-center justify-between mt-3">
                        <span><i class="fas fa-heart text-blue-400 mr-2"></i>Bienestar</span>
                        <span id="r-well" class="q-score">0 / 30</span>
                    </div>
                    <div class="q-bar mt-2"><div id="rbar-well" class="q-bar-fill" style="background:#60a5fa;"></div></div>

                    <div class="text-xs text-gray-300 flex items-center justify-between mt-3">
                        <span><i class="fas fa-shield-alt text-purple-400 mr-2"></i>Seguridad</span>
                        <span id="r-sec" class="q-score">0 / 35</span>
                    </div>
                    <div class="q-bar mt-2"><div id="rbar-sec" class="q-bar-fill" style="background:#a78bfa;"></div></div>
                    </div>
                </div>

                <div class="bg-gray-800 p-4 rounded-lg border border-gray-700">
                    <div class="text-gray-300 text-sm mb-2">Top 2 oportunidades</div>
                    <ul id="r-recos" class="text-xs text-gray-300 list-disc pl-5 m-0"></ul>
                </div>

                <div class="flex gap-2">
                    <button class="q-btn" onclick="Reveal.up()"><i class="fas fa-arrow-up text-gray-300"></i> Seguridad</button>
                </div>
                </div>
            </section>

            </section>
            <!-- ====== FIN BLOQUE FINAL ====== -->

        </div>
    </div>

    <!-- Scripts de Reveal.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/reveal.min.js"></script>
    <!-- Plugins Adicionales para Web (Zoom y Notas) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/plugin/notes/notes.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.5.0/plugin/zoom/zoom.min.js"></script>

    <script>
        // Inicializaci√≥n de Reveal con Plugins
        Reveal.initialize({
            // Se desactivan hash y history para evitar conflictos en entornos seguros/iframe
            hash: false, 
            history: false,
            
            controls: true,
            progress: true,
            center: true,
            transition: 'slide',
            width: 1200,
            height: 700,
            margin: 0.1,
            // Cargar plugins
            plugins: [ RevealZoom, RevealNotes ]
        });

        /* ====== Q-Hol√≠stico: Motor de evaluaci√≥n ====== */
        (function () {
        const STORAGE_KEY = "qholistic_eval_v1";

        const $ = (id) => document.getElementById(id);
        const clamp01 = (x) => Math.max(0, Math.min(1, x));
        const n = (id, fallback=0) => {
            const el = $(id);
            const v = el ? Number(el.value) : fallback;
            return Number.isFinite(v) ? v : fallback;
        };
        const s = (id, fallback="0") => {
            const el = $(id);
            return el ? String(el.value ?? fallback) : fallback;
        };

        // Normalizaci√≥n √∫til:
        // "lower is better": v <= good => 1; v >= bad => 0; lineal entre
        const normLowerBetter = (v, good, bad) => {
            if (v <= good) return 1;
            if (v >= bad) return 0;
            return clamp01((bad - v) / (bad - good));
        };
        // "higher is better": v >= good => 1; v <= bad => 0; lineal entre
        const normHigherBetter = (v, good, bad) => {
            if (v >= good) return 1;
            if (v <= bad) return 0;
            return clamp01((v - bad) / (good - bad));
        };

        const weightedPts = (maxPts, norm) => Math.round(maxPts * clamp01(norm));

        function calcAll() {
            // ===== Arquitectura (35) =====
            const arch = [];

            // Escalabilidad (10): 75% m√©trica (300%), 25% evidencia
            {
            const metric = normHigherBetter(n("arch_scale_pct", 0), 300, 0);
            const ev = Number(s("arch_scale_ev", "0"));
            const norm = 0.75 * metric + 0.25 * clamp01(ev);
            arch.push({ key:"Escalabilidad", max:10, norm, pts: weightedPts(10, norm) });
            }

            // Rendimiento (10): 500ms bueno, 2000ms malo
            {
            const metric = normLowerBetter(n("arch_latency_ms", 2000), 500, 2000);
            const ev = Number(s("arch_latency_ev", "0"));
            const norm = 0.75 * metric + 0.25 * clamp01(ev);
            arch.push({ key:"Rendimiento", max:10, norm, pts: weightedPts(10, norm) });
            }

            // Modularidad (8): promedio estructura + contratos
            {
            const a = Number(s("arch_mod_level", "0.2"));
            const b = Number(s("arch_mod_ev", "0.2"));
            const norm = clamp01((a + b) / 2);
            arch.push({ key:"Modularidad", max:8, norm, pts: weightedPts(8, norm) });
            }

            // Tolerancia (7): 0 regresiones bueno, 3 malo (en 10 deploys) + estrategia
            {
            const metric = normLowerBetter(n("arch_regressions", 3), 0, 3);
            const ev = Number(s("arch_fail_ev", "0.2"));
            const norm = 0.7 * metric + 0.3 * clamp01(ev);
            arch.push({ key:"Tolerancia a fallos", max:7, norm, pts: weightedPts(7, norm) });
            }

            const archPts = arch.reduce((a,c)=>a+c.pts,0);
            const archMax = 35;

            // ===== Bienestar (30) =====
            const well = [];

            // Rotaci√≥n (10): <=5 bueno, 15 malo + plan
            {
            const turnover = n("well_turnover_pct", 15);
            const metric = normLowerBetter(turnover, 5, 15);
            const ev = Number(s("well_turnover_ev", "0.2"));
            const norm = 0.7 * metric + 0.3 * clamp01(ev);
            well.push({ key:"Rotaci√≥n", max:10, norm, pts: weightedPts(10, norm), turnover });
            }

            // On-call (10): <=2 bueno, 10 malo + runbooks
            {
            const metric = normLowerBetter(n("well_alerts_week", 10), 2, 10);
            const ev = Number(s("well_oncall_ev", "0.2"));
            const norm = 0.7 * metric + 0.3 * clamp01(ev);
            well.push({ key:"On-call", max:10, norm, pts: weightedPts(10, norm) });
            }

            // Desconexi√≥n (5): % compliance + pol√≠tica
            {
            const metric = clamp01(n("well_disconnect_pct", 0) / 100);
            const ev = Number(s("well_disconnect_ev", "0.2"));
            const norm = 0.75 * metric + 0.25 * clamp01(ev);
            well.push({ key:"Desconexi√≥n", max:5, norm, pts: weightedPts(5, norm) });
            }

            // Predictibilidad (5): <=10 bueno, 30 malo + proceso
            {
            const metric = normLowerBetter(n("well_dev_pct", 30), 10, 30);
            const ev = Number(s("well_pred_ev", "0.2"));
            const norm = 0.7 * metric + 0.3 * clamp01(ev);
            well.push({ key:"Predictibilidad", max:5, norm, pts: weightedPts(5, norm) });
            }

            const wellPts = well.reduce((a,c)=>a+c.pts,0);
            const wellMax = 30;

            // ===== Seguridad (35) =====
            const sec = [];

            // Cifrado (12): nivel + auditor√≠a
            {
            const a = Number(s("sec_crypto_level", "0.2"));
            const b = Number(s("sec_crypto_ev", "0"));
            const norm = 0.7 * clamp01(a) + 0.3 * clamp01(b);
            sec.push({ key:"Cifrado", max:12, norm, pts: weightedPts(12, norm) });
            }

            // Integridad (10): % bloqueo + mecanismo
            {
            const metric = clamp01(n("sec_integrity_pct", 0) / 100);
            const ev = Number(s("sec_integrity_ev", "0.2"));
            const norm = 0.7 * metric + 0.3 * clamp01(ev);
            sec.push({ key:"Integridad", max:10, norm, pts: weightedPts(10, norm) });
            }

            // Accesos (8): modelo + mfa
            {
            const a = Number(s("sec_access_level", "0.2"));
            const b = Number(s("sec_mfa_ev", "0.2"));
            const norm = clamp01((a + b) / 2);
            sec.push({ key:"Accesos", max:8, norm, pts: weightedPts(8, norm) });
            }

            // Sanitizaci√≥n (5): 0 criticas bueno, 5 malo + pipeline
            {
            const metric = normLowerBetter(n("sec_vuln_crit", 5), 0, 5);
            const ev = Number(s("sec_sanitize_ev", "0.2"));
            const norm = 0.7 * metric + 0.3 * clamp01(ev);
            sec.push({ key:"Sanitizaci√≥n", max:5, norm, pts: weightedPts(5, norm) });
            }

            const secPts = sec.reduce((a,c)=>a+c.pts,0);
            const secMax = 35;

            // ===== Total + veto =====
            const total = archPts + wellPts + secPts; // /100
            const archPct = Math.round((archPts / archMax) * 100);
            const wellPct = Math.round((wellPts / wellMax) * 100);
            const secPct  = Math.round((secPts  / secMax ) * 100);

            const turnover = well.find(x => x.key==="Rotaci√≥n")?.turnover ?? 999;
            const veto = (wellPct < 50) || (turnover > 5);

            let level = "No certificado";
            if (!veto) {
            if (total >= 90) level = "Nivel Oro";
            else if (total >= 75) level = "Nivel Plata";
            else if (total >= 60) level = "Nivel Bronce";
            else level = "No certificado";
            }

            // Top 2 oportunidades (menor norm relativo)
            const allCriteria = [
            ...arch.map(c => ({...c, pillar:"Arquitectura"})),
            ...well.map(c => ({...c, pillar:"Bienestar"})),
            ...sec.map(c => ({...c, pillar:"Seguridad"})),
            ];
            allCriteria.sort((a,b) => (a.norm - b.norm));
            const recos = allCriteria.slice(0,2).map(c => ({
            text: `${c.pillar}: ${c.key} (${c.pts}/${c.max})`
            }));

            return {
            arch, well, sec,
            archPts, wellPts, secPts,
            archMax, wellMax, secMax,
            archPct, wellPct, secPct,
            total, level, veto, turnover,
            recos
            };
        }

        function render() {
            const r = calcAll();

            // Arquitectura (criterios)
            $("s-arch-scale").textContent = `${r.arch[0].pts} / ${r.arch[0].max}`;
            $("s-arch-lat").textContent   = `${r.arch[1].pts} / ${r.arch[1].max}`;
            $("s-arch-mod").textContent   = `${r.arch[2].pts} / ${r.arch[2].max}`;
            $("s-arch-fail").textContent  = `${r.arch[3].pts} / ${r.arch[3].max}`;
            $("pill-arch").textContent    = `${r.archPts} / ${r.archMax}`;
            $("bar-arch").style.width     = `${r.archPct}%`;

            // Bienestar
            $("s-well-turn").textContent  = `${r.well[0].pts} / ${r.well[0].max}`;
            $("s-well-oncall").textContent= `${r.well[1].pts} / ${r.well[1].max}`;
            $("s-well-disc").textContent  = `${r.well[2].pts} / ${r.well[2].max}`;
            $("s-well-pred").textContent  = `${r.well[3].pts} / ${r.well[3].max}`;
            $("pill-well").textContent    = `${r.wellPts} / ${r.wellMax}`;
            $("bar-well").style.width     = `${r.wellPct}%`;

            // Seguridad
            $("s-sec-crypto").textContent = `${r.sec[0].pts} / ${r.sec[0].max}`;
            $("s-sec-int").textContent    = `${r.sec[1].pts} / ${r.sec[1].max}`;
            $("s-sec-acc").textContent    = `${r.sec[2].pts} / ${r.sec[2].max}`;
            $("s-sec-san").textContent    = `${r.sec[3].pts} / ${r.sec[3].max}`;
            $("pill-sec").textContent     = `${r.secPts} / ${r.secMax}`;
            $("bar-sec").style.width      = `${r.secPct}%`;

            // Reporte
            if ($("r-total")) {
            $("r-total").innerHTML = `<i class="fas fa-gauge-high"></i> ${r.total} / 100`;
            $("bar-total").style.width = `${r.total}%`;

            // Nivel
            const icon = r.level.includes("Oro") ? "fa-medal" : r.level.includes("Plata") ? "fa-medal" : r.level.includes("Bronce") ? "fa-medal" : "fa-ban";
            $("r-level").innerHTML = `<i class="fas ${icon}"></i> ${r.level}`;

            // Breakdown
            $("r-arch").textContent = `${r.archPts} / ${r.archMax}`;
            $("r-well").textContent = `${r.wellPts} / ${r.wellMax}`;
            $("r-sec").textContent  = `${r.secPts} / ${r.secMax}`;
            $("rbar-arch").style.width = `${r.archPct}%`;
            $("rbar-well").style.width = `${r.wellPct}%`;
            $("rbar-sec").style.width  = `${r.secPct}%`;

            // Veto
            const vetoEl = $("r-veto");
            if (r.veto) {
                vetoEl.classList.remove("hidden");
                vetoEl.innerHTML = `<i class="fas fa-exclamation-triangle mr-2"></i>
                <strong>Veto activado:</strong> Bienestar ${r.wellPct}% y/o Rotaci√≥n ${r.turnover}% &nbsp;‚Üí&nbsp; <strong>NO CERTIFICA</strong>`;
            } else {
                vetoEl.classList.add("hidden");
                vetoEl.innerHTML = "";
            }

            // Recos
            const ul = $("r-recos");
            ul.innerHTML = "";
            r.recos.forEach(x => {
                const li = document.createElement("li");
                li.textContent = x.text;
                ul.appendChild(li);
            });
            }

            // Pill text en slides (por si acaso)
            if ($("pill-arch")) $("pill-arch").textContent = `${r.archPts} / ${r.archMax}`;
            if ($("pill-well")) $("pill-well").textContent = `${r.wellPts} / ${r.wellMax}`;
            if ($("pill-sec"))  $("pill-sec").textContent  = `${r.secPts} / ${r.secMax}`;

            saveState();
            return r;
        }

        function saveState() {
            try {
            const values = {};
            document.querySelectorAll("[data-q]").forEach(el => {
                values[el.id] = el.value;
            });
            localStorage.setItem(STORAGE_KEY, JSON.stringify(values));
            } catch (_) {}
        }

        function loadState() {
            try {
            const raw = localStorage.getItem(STORAGE_KEY);
            if (!raw) return;
            const values = JSON.parse(raw);
            Object.entries(values).forEach(([id, val]) => {
                const el = $(id);
                if (el) el.value = val;
            });
            } catch (_) {}
        }

        function resetAll() {
            document.querySelectorAll("[data-q]").forEach(el => {
            if (el.tagName === "SELECT") el.selectedIndex = 0;
            else el.value = "";
            });
            try { localStorage.removeItem(STORAGE_KEY); } catch(_) {}
            render();
        }

        async function copyReport() {
            const r = calcAll();
            const text =
        `Q-Hol√≠stico | Reporte
        Total: ${r.total}/100 | ${r.level}${r.veto ? " | VETO: NO CERTIFICA" : ""}

        Arquitectura: ${r.archPts}/${r.archMax}
        Bienestar: ${r.wellPts}/${r.wellMax}
        Seguridad: ${r.secPts}/${r.secMax}

        Top oportunidades:
        - ${r.recos[0]?.text ?? "-"}
        - ${r.recos[1]?.text ?? "-"}`;
            try {
            await navigator.clipboard.writeText(text);
            } catch (_) {
            // fallback: prompt
            window.prompt("Copia el reporte:", text);
            }
        }

        function bind() {
            document.querySelectorAll("[data-q]").forEach(el => {
            el.addEventListener("input", render);
            el.addEventListener("change", render);
            });

            if (window.Reveal && typeof Reveal.on === "function") {
            Reveal.on("slidechanged", () => render());
            Reveal.on("ready", () => render());
            }
        }

        window.QEval = { render, resetAll, copyReport };

        // init
        loadState();
        bind();
        render();
        })();
    </script>
</body>
</html>
